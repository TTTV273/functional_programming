# Currying Practice

Remember, [currying](https://en.wikipedia.org/wiki/Currying) is when we take a function that accepts multiple arguments:

```py
final_volume = box_volume(3, 4, 5)
print(final_volume)
# 60
```

And convert it into a series of functions that each accept a single argument:

```py
final_volume = box_volume(3)(4)(5)
print(final_volume)
# 60
```

- `box_volume(3)` returns a new function that accepts a single integer and returns a new function
- `box_volume(3)(4)` returns another new function that accepts a single integer and returns a new function
- `box_volume(3)(4)(5)` returns the final result

Here's another way of calling it, where each function is stored in a variable before being called:

```py
with_length_3 = box_volume(3)
with_len_3_width_4 = with_length_3(4)
final_volume = with_len_3_width_4(5)
print(final_volume)
# 60
```

Here are the function definitions:

```py
def box_volume(length):
  def box_volume_with_len(width):
    def box_volume_with_len_width(height):
      return length * width * height
    return box_volume_with_len_width
  return box_volume_with_len
```

## Assignment

Doc2Doc needs to be able to find the number of lines in a document that contain a specific sequence of characters. For example, given the following document:

```
aaaa
bbbb
ccdd
aabb
```

How many lines contain the sequence "aa"? The answer is 2: "aaaa" and "aabb".

**Complete the `lines_with_sequence` function.** It should return a series of curried functions so it can be called like this:

```py
num_lines = lines_with_sequence(char)(length)(doc)
```

The "sequence" is generated by the first `with_char` that has been provided for you. It works like this:

| Character | Length | Sequence |
|-----------|--------|----------|
| "a"       | 3      | "aaa"    |
| "b"       | 2      | "bb"     |
| "*"       | 4      | "****"   |

**You need to define and return a second curried function.** I called mine `with_length`. It should accept the final parameter, a `doc` string, and return the number of lines that contain the sequence.

1. [ ] Define the `with_length` function inside the `with_char` function, it should accept a `doc`.
2. [ ] [Split](https://docs.python.org/3/library/stdtypes.html#str.split) the `doc` into lines.
3. [ ] Use a loop (or if you're feeling fancy, import and use [reduce](https://docs.python.org/3/library/functools.html#functools.reduce)) to count the number of lines that contain the sequence [in](https://docs.python.org/3/reference/expressions.html#membership-test-details) them.
4. [ ] Return the count from the `with_length` function.
5. [ ] Return the `with_length` function from the `with_char` function.

## Gemini Translation

Chào anh, em đã đọc và dịch xong nội dung bài thực hành mới. Bài này sẽ giúp chúng ta củng cố kiến thức về Currying qua một ví dụ thực tế.

-----

### **Thực hành Currying**

Hãy nhớ lại, [currying](https://en.wikipedia.org/wiki/Currying) là khi chúng ta lấy một hàm chấp nhận nhiều tham số:

```python
final_volume = box_volume(3, 4, 5)
print(final_volume)
# 60
```

Và chuyển nó thành một chuỗi các hàm, mỗi hàm chỉ chấp nhận một tham số duy nhất:

```python
final_volume = box_volume(3)(4)(5)
print(final_volume)
# 60
```

  - `box_volume(3)` trả về một hàm mới, hàm này chấp nhận một số nguyên và trả về một hàm mới khác.
  - `box_volume(3)(4)` trả về một hàm mới nữa, hàm này chấp nhận một số nguyên và trả về kết quả cuối cùng.
  - `box_volume(3)(4)(5)` trả về kết quả cuối cùng.

Đây là một cách gọi khác, nơi mỗi hàm được lưu vào một biến trước khi được gọi:

```python
with_length_3 = box_volume(3)
with_len_3_width_4 = with_length_3(4)
final_volume = with_len_3_width_4(5)
print(final_volume)
# 60
```

Và đây là định nghĩa của các hàm đó:

```python
def box_volume(length):
  def box_volume_with_len(width):
    def box_volume_with_len_width(height):
      return length * width * height
    return box_volume_with_len_width
  return box_volume_with_len
```

-----

## **Bài tập**

Dự án Doc2Doc cần có khả năng tìm số dòng trong một tài liệu có chứa một chuỗi ký tự cụ thể. Ví dụ, cho tài liệu sau:

```
aaaa
bbbb
ccdd
aabb
```

Có bao nhiêu dòng chứa chuỗi "aa"? Câu trả lời là 2: "aaaa" và "aabb".

**Hãy hoàn thành hàm `lines_with_sequence`.** Nó phải trả về một chuỗi các hàm đã được curry hóa để có thể được gọi như sau:

```python
num_lines = lines_with_sequence(char)(length)(doc)
```

"Chuỗi ký tự" (sequence) được tạo ra bởi hàm `with_char` đã được cung cấp sẵn cho bạn. Nó hoạt động như sau:

| Ký tự (Character) | Độ dài (Length) | Chuỗi (Sequence) |
|:------------------|:----------------|:------------------|
| "a"               | 3               | "aaa"            |
| "b"               | 2               | "bb"             |
| "*"               | 4               | "****"           |

**Bạn cần định nghĩa và trả về một hàm curry hóa thứ hai.** Tác giả gọi nó là `with_length`. Nó sẽ chấp nhận tham số cuối cùng là một chuỗi `doc` và trả về số dòng có chứa chuỗi ký tự đã tạo.

1.  [ ] Định nghĩa hàm `with_length` bên trong hàm `with_char`, hàm này nên chấp nhận một tham số `doc`.
2.  [ ] [Tách](https://docs.python.org/3/library/stdtypes.html#str.split) chuỗi `doc` thành các dòng.
3.  [ ] Sử dụng vòng lặp (hoặc nếu bạn muốn thử thách hơn, hãy import và sử dụng [reduce](https://docs.python.org/3/library/functools.html#functools.reduce)) để đếm số dòng có chứa chuỗi ký tự [bên trong](https://docs.python.org/3/reference/expressions.html#membership-test-details) nó.
4.  [ ] Trả về số đếm từ hàm `with_length`.
5.  [ ] Trả về hàm `with_length` từ hàm `with_char`.

-----

Các bước hướng dẫn đã được liệt kê rất rõ ràng. Để bắt đầu, chúng ta hãy tập trung vào bước đầu tiên: **Định nghĩa hàm `with_length` bên trong hàm `with_char`**.

Anh thử viết phần khai báo cho hàm này xem sao nhé.
